"use strict";define("render",["lodash","coreUtils","utils","core","reactDOM","experiment","animations","tweenEngine","TweenMax","TimelineMax","ScrollToPlugin","DrawSVGPlugin"],function(e,n,r,i,t,a,s,o,d,w){function c(e){window.clientSideRender||require(["warmup"],function(n){e(n)})}function l(e,n){var r=n.query,i=r.configName||"fullFunctionality",t=e[i]||e.fullFunctionality,a=t.getConfig();if(!r.dsOrigin)throw new Error("You must define dsOrigin parameter in order to use the documentServices - please speak to html-server team for a key");return a.origin=r.dsOrigin,a}function u(n,i,t){var a=e(t).keys().pull("masterPage").value();return e.mapValues(t,function(e,t){return i&&window.pagesData&&window.pagesData[t]?e:r.dataFixer.fix(e,a.slice(),n.requestModel,n.currentUrl,n.urlFormatModel,"site"===n.viewMode,n.rendererModel)})}function p(n,r,a,s,o){c(function(e){e.willRender(r)}),window.clientSideRender&&window.santaRenderingError&&window.parent&&window.parent.postMessage({santaRenderingError:window.santaRenderingError.errorInfo},"*");var d=window.document.getElementById("SITE_CONTAINER").children[0];s.onBeforeLayout=function(){var e=window.document.getElementById("SITE_CONTAINER").children[0],n=e.innerHTML;window.sssr.clientSantaVersion=e.getAttribute("data-santa-version"),c(function(i){window.sssr.success=d===e,window.sssr.clientSideRender={sinceInitialTimestamp:Date.now()-window.wixBiSession.initialTimestamp,performanceNow:v()},window.parent&&(window.sssr.success?window.parent.postMessage("sssrSuccess","*"):(window.sssr.clientSantaVersion!==window.sssr.serverSantaVersion&&(n=window.sssr.clientSantaVersion,window.sssr.serverMarkup=window.sssr.serverSantaVersion),window.sssr.clientMarkup=n,window.sssr.serverMarkup=window.sssr.serverMarkup||d.innerHTML,window.parent.postMessage({sssrFail:{clientMarkup:window.sssr.clientMarkup,serverMarkup:window.sssr.serverMarkup}},"*"))),i.didRender(r)})},i.renderer.renderSite(r,a,s,function(r){window.rendered?window.rendered.forceUpdate():(window.rendered=t.render(r,window.document.getElementById("SITE_CONTAINER")),window.onpopstate=window.rendered.onPopState,window.onhashchange=window.rendered.onHashChange,window.parent!==window&&require(["santaPreview"],function(e){window.rendered.registerAspectToEvent("siteReady",function(){o&&o(window.rendered),window.documentServices&&(window.parent.postMessage("documentServicesLoaded","*"),window.createSantaPreview=e)})}),n.qaAutomation&&(e.set(window,"testApi.domSelectors",n.qaAutomation.getDomSelectors(n.react,n.reactDOM)),window.testApi.domSelectors.setSearchRoot(window.rendered),e.set(window,"testApi.isReady",!0)))})}function S(t,a,c){var l={};n.urlUtils.isQueryParamOn(c.currentUrl,"isSantaEditor")&&(l=e.assign(l,{componentViewMode:"editor"})),c.rendererModel.previewMode&&(l=e.assign(l,{isSocialInteractionAllowed:!1,isPlayingAllowed:!1})),c.renderFlags=e.assign({},c.renderFlags,l);var u=new r.FullSiteData(c),p=o.create(d,w);u.animations=s.create(p);var S=i.SiteDataAPI.createSiteDataAPIAndDal(u,a),m=S.siteData,v=S.siteDataAPI;return{fullSiteData:u,displayedSiteData:m,siteDataWrapper:S,viewerPrivateServices:{pointers:S.pointers,displayedDAL:S.displayedDal,siteDataAPI:v},isServerSideRender:m.isClientAfterSSR(),siteModel:c,siteDataAPI:v}}function m(n,i,t,s,o){var d=S(n,i,t),w=n.documentServices;try{w&&e.isUndefined(window.karmaIntegration)&&a.isOpen("sv_fullstory")&&r.integrations.fullStory.start()}catch(e){}if(w)d.siteDataWrapper.dataLoadedRegistrar=d.siteDataAPI.registerDataLoadedCallback.bind(d.siteDataAPI),window.documentServices=new w.Site(l(w.configs,d.siteModel.currentUrl),d.siteDataWrapper,e.partial(u,d.siteModel,d.isServerSideRender),e.partial(p,n,d.displayedSiteData,d.viewerPrivateServices,s)),e.set(window,"testApi.documentServices",window.documentServices);else{var c=d.fullSiteData.pagesData;d.fullSiteData.pagesData=c&&u(d.siteModel,d.isServerSideRender,c),c.masterPage&&d.siteDataAPI.createDisplayedPage("masterPage"),p(n,d.displayedSiteData,d.viewerPrivateServices,s,o)}}var v="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date);return{clientSide:m}});
//# sourceMappingURL=render.min.js.map